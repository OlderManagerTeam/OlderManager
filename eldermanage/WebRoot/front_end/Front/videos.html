<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <title>健康视频</title>
    <meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="format-detection" content="telephone=no">
	<meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />

	<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
	<link rel="stylesheet" href="css/default.css?t=227" />
	<link rel="stylesheet" href="css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/htmlstyle.css" />
	<link rel="stylesheet" href="css/layui.css"  media="all">
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	
	<script type="text/javascript" src="lib/handlebars/handlebars.min.js"></script>
	<script type="text/javascript" src="lib/iscroll/iscroll-probe.js"></script>
	<script type="text/javascript" src="lib/amazeui/amazeui.min.js"></script>
	<script type="text/javascript" src="lib/raty/jquery.raty.js"></script>
	<script type="text/javascript" src="js/main.min.js?t=1"></script>

	<script src="js/layui.all.js" charset="utf-8"></script>
	<script src="js/laypage.js" charset="utf-8"></script>

	<style type="text/css">
		
	</style>


</head>
<body>
	<header>
	    <div class="header-top">
	        <div class="width-center">
	            <div class="header-title div-inline">
	                <strong>孝和集团</strong>
	                <span>XIAOHEJITUAN</span>
	            </div>

	            <div class="header-right">
	                <span>全国咨询热线</span>
	                <span>00-000-00000000</span>
	            </div>



	        </div>
	    </div>
	    <div class="header-nav">
	        <button class="am-show-sm-only am-collapsed font f-btn" data-am-collapse="{target: '.header-nav'}">Menu <i
	                class="am-icon-bars"></i></button>
	        <nav>
	        <ul class="header-nav-ul am-collapse am-in">
	            <li class="on"><a href="index.html" name="index">网站首页</a></li>
	            <li><a href="health_news.html" name="show">健康养生</a></li>
	            <li><a href="product_list.html" name="course">讲座课程</a></li>
	            <li><a href="shoppingindex.html" name="shopping">电子商务</a></li>
	            <li><a href="about.html" name="about">关于我们</a></li>
	            <li><a href="contact.html" name="message">联系我们</a>
	                <div class="secondary-menu">

	                    <ul><li><a href="message.html" class="message"></a></li></ul>
	                </div>
	            </li>
	            <li style="float: right;"><a href="register.html" name="register">注册</a>
	            <li style="float: right;"><a href="login.html" name="login">登录</a>
	        </ul>
	        </nav>
	    </div>
	</header>
	
	<div>
	    <section class="article-content">
	        <div class="article-protect-tab">
	            <a href="videos.html"><span>健康视频</span></a>
	            <a href="courses.html"><span>讲座</span></a>
	            <a href="activities.html"><span>活动</span></a>
	            <a href="video_history.html"><span>播放历史</span></a>
	        </div>
	    </section>

	    <div style="margin-right: 15%;margin-left: 15%;font-size: 3rem;">
	    	当前位置：健康视频
	    </div>

	    <div>
	    	<div style="margin-right: 15%;margin-left: 15%;" class="am-slider am-slider-default"
	    		data-am-flexslider="{controlNav: 'thumbnails', directionNav: false, slideshow: true}">
	    		<ul class="am-slides">
				    <li data-thumb="images/banner.jpg">
				      <img src="images/banner.jpg" /></li>
				    <li data-thumb="images/banner2.jpg">
				      <img src="images/banner2.jpg" /></li>
				    <li data-thumb="images/banner.jpg">
				      <img src="images/banner.jpg" /></li>
				    <li data-thumb="images/banner2.jpg">
				      <img src="images/banner2.jpg" /></li>		      
				</ul>
	    	</div>
	    </div>

	    <div style="height: 50px;"></div>

	    <div style="margin-right: 15%;margin-left: 15%;">
	    	<div style="height: 7rem;">
	    		<div style="float: left;font-size: 2.3rem;margin-top: 0.6rem;">
	    			请选择要观看的视频类型:
	    		</div>
		    	<div style="float: left;">
		    		<select class="form-control" style="width: 25rem;font-size: 2rem;height: 4rem" id="videotype">
		    			<option>健康视频</option>
		    			<option>讲座回放</option>
		    		</select>
		    	</div>
		    	<div style="clear: all;"></div>
	    	</div>

	    	<div class="row">
	    		<!-- 视屏列表 -->
			   <div class="col-md-8 col-lg-9" id="videolist">
			   		
			   </div>

			   <!-- 推荐列表 -->
			    <div class="col-md-4 col-lg-3" id="heatlist">
	    			<p class="hotvideotitle">热门视频</p>
	    			
		   		</div>

			  
			</div>
			<!-- 分页  -->
			<div id="demo5" style="margin-left: 30rem;"></div>
	    </div>
		    
		    
	</div>

	<footer class="footer">
	    <div class="footer-pc">
	    <ul>
	        <li><p>网站首页 | 健康养生 | 讲座课程 | 电子商务 | 关于我们 | 联系我们</p></li>
	        <li><p>地址：江苏省南通市通州湾科创城</p></li>
	        <li><P>电话：XXXX-XXXXXXX</P></li>
	        <li><p>邮编：226000</p></li>
	    </ul>
	    </div>
	</footer>

	<script type="text/javascript">
		var videopartition = $("#videotype").val();
		videoType(videopartition);
		$("#videotype").change(function (){
			videoType($(this).val());
		});
		function videoType(type){
			$.ajax({
				type:'get',
				contentType:'application/json',
				url:"http://localhost:8080/eldermanage/v1/course/classes?videopartition="+type,
				data:null,
				success:function(result){
					//将服务器传来的字符串转换为JSON格式运用在html
					//var resultdata = JSON.parse(result)
					//返回success信息
					//alert(result.success)
					var videodata = result.data;
					if(  result.success === false){
						$("#videolist").html('<img class="img-responsive" src="images/banner.jpg" />');
						$("#demo5").hide();
						return false;
					} 
					$("#demo5").show();
					page(videodata, $("#demo5"));									
					
				},
				error:function(){
					alert('fail')
				}
			})
		}
		

		$.ajax({
			type:'get',
			contentType:'application/json',
			url:"http://localhost:8080/eldermanage/v1/course/video/heat",
			data:null,
			success:function(result){
				//将服务器传来的字符串转换为JSON格式运用在html
				//var resultdata = JSON.parse(result)
				//返回success信息
				//alert(result.success)

				var heatdata = result.data;
				
				for(i = 0;i<=9;i++) {
					var oP = `
								<p class="hotvideo"><a href="#"><span>${i+1}.</span><span>${heatdata[i].videoname}</span></a></p>
					`;

					$($(oP)).appendTo('#heatlist');
				}
			},
			error:function(){
				alert('fail')
			}
		})

		//   分页
		function page(videodata, pageRoot){
			layui.use(['laypage', 'layer'], function(){
						var laypage = layui.laypage
						,layer = layui.layer;
						laypage.render({
						    elem: pageRoot
						    ,count: videodata.length
						    ,limit: 12  //每页个数
						    ,curr: location.hash.replace('#!fenye=', '') //获取hash值为fenye的当前页
						    ,hash: 'fenye' //自定义hash值
						    ,jump: function(obj){
						      //模拟渲染
						      document.getElementById('videolist').innerHTML = function(){
						        var arr = []
						        ,thisData = videodata.concat().splice(obj.curr*obj.limit - obj.limit, obj.limit);
						        layui.each(thisData, function(index, item){
						        	let datas =`
										<div class="col-md-6 col-lg-4">
							    			<a href="${item.videourl}">
							    			<div>
							    				<img src="images/banner.jpg" class="courseimg">
							    			</div>
							    			<div><p class="videotitlesize">${item.videoname}</p></div>
							    			<div><span class="videotimesize">时长:${item.videotime}分钟</span>
							    				<span class="videovolume">播放数:${item.videoheat}</span>
							    			</div>
							    			<div style="height: 5rem;"></div>
							    			</a>
								   		</div>
									`;
						        	arr.push(datas);
						        });
						        return arr.join('');
						      }();
						    }
						});
									
					});
		}
	</script>

</body>
</html>